Great question, Saurabh ğŸ‘
**Sealed Classes** are a *very important Java 17+ interview topic*. Iâ€™ll explain **from absolute beginner â†’ advanced**, with **clear theory, diagrams-in-words, complete code, comments, outputs**, and then **tricky interview questions** (with answers).

Iâ€™ll keep explanations **simple, real-life based**, exactly how you prefer.

---

# 1ï¸âƒ£ What is a Sealed Class? (Beginner)

### Simple definition

A **sealed class** is a class that **controls which classes are allowed to extend (inherit) it**.

ğŸ‘‰ You explicitly say:

> â€œOnly THESE classes can extend me. No one else.â€

---

### Real-life example ğŸ¦

Think of **Bank Account types**:

* SavingsAccount
* CurrentAccount
* LoanAccount

You **donâ€™t want random account types** like:

* CryptoAccount ğŸ˜„
* GamblingAccount

So you **seal** the base class.

---

# 2ï¸âƒ£ Java Version

| Feature                  | Java Version      |
| ------------------------ | ----------------- |
| Sealed Classes (Preview) | Java 15           |
| Sealed Classes (Final)   | **Java 17 (LTS)** |

ğŸ‘‰ **Java 17 onwards â€“ stable & interview-safe**

---

# 3ï¸âƒ£ Why do we need Sealed Classes?

Before sealed classes:

```java
class Shape {}

class Circle extends Shape {}
class Triangle extends Shape {}
class RandomShape extends Shape {} // âŒ No control
```

### Problems:

* Anyone can extend your class
* Hard to reason about code
* Unsafe `instanceof` checks
* Switch-case not exhaustive

---

### With Sealed Classes:

* Controlled inheritance
* Safer design
* Better pattern matching
* Compiler knows all subtypes

---

# 4ï¸âƒ£ Basic Syntax of Sealed Class

```java
public sealed class Shape 
    permits Circle, Rectangle {
}
```

### Keywords explained:

| Keyword   | Meaning               |
| --------- | --------------------- |
| `sealed`  | Restricts inheritance |
| `permits` | Allowed subclasses    |

---

# 5ï¸âƒ£ Rules of Sealed Classes (VERY IMPORTANT âš ï¸)

### Rule 1ï¸âƒ£: Subclasses must be in **same module**

(or same package if no module)

---

### Rule 2ï¸âƒ£: Subclasses must be **one of these**

Every permitted subclass **must** be:

1. `final`  âœ…
2. `sealed` âœ…
3. `non-sealed` âœ…

âŒ Normal class is NOT allowed

---

# 6ï¸âƒ£ First Complete Example (with Output)

## Step 1: Sealed Parent

```java
public sealed class Shape
        permits Circle, Rectangle {
    public abstract double area();
}
```

---

## Step 2: Final subclass

```java
public final class Circle extends Shape {

    private final double radius;

    public Circle(double radius) {
        this.radius = radius;
    }

    @Override
    public double area() {
        return Math.PI * radius * radius;
    }
}
```

---

## Step 3: Another Final subclass

```java
public final class Rectangle extends Shape {

    private final double length;
    private final double width;

    public Rectangle(double length, double width) {
        this.length = length;
        this.width = width;
    }

    @Override
    public double area() {
        return length * width;
    }
}
```

---

## Step 4: Test Class

```java
public class TestSealed {
    public static void main(String[] args) {

        Shape s1 = new Circle(5);
        Shape s2 = new Rectangle(4, 6);

        System.out.println(s1.area());
        System.out.println(s2.area());
    }
}
```

---

### Output

```text
78.53981633974483
24.0
```

---

# 7ï¸âƒ£ `non-sealed` â€“ Very Important Concept

### What is `non-sealed`?

It **reopens inheritance** for that subclass.

---

### Example

```java
public sealed class Vehicle
        permits Car, Bike {
}
```

```java
public non-sealed class Car extends Vehicle {
}
```

```java
public class ElectricCar extends Car {
}
```

```java
public class PetrolCar extends Car {
}
```

âœ” Allowed because `Car` is **non-sealed**

---

# 8ï¸âƒ£ Sealed + Sealed (Multi-level sealing)

```java
public sealed class Animal
        permits Mammal, Bird {
}
```

```java
public sealed class Mammal
        extends Animal
        permits Dog, Cat {
}
```

```java
public final class Dog extends Mammal {
}
```

```java
public final class Cat extends Mammal {
}
```

âœ” Multi-level controlled inheritance

---

# 9ï¸âƒ£ Sealed Interfaces

Yes âœ… **Interfaces can also be sealed**

---

### Example

```java
public sealed interface Payment
        permits UpiPayment, CardPayment {
    void pay();
}
```

```java
public final class UpiPayment implements Payment {
    public void pay() {
        System.out.println("Paid using UPI");
    }
}
```

```java
public final class CardPayment implements Payment {
    public void pay() {
        System.out.println("Paid using Card");
    }
}
```

---

### Test

```java
public class PaymentTest {
    public static void main(String[] args) {
        Payment p = new UpiPayment();
        p.pay();
    }
}
```

### Output

```text
Paid using UPI
```

---

# ğŸ”Ÿ Sealed Class + Pattern Matching (ADVANCED ğŸ”¥)

### Without sealed class (dangerous)

```java
if (shape instanceof Circle) {
}
else if (shape instanceof Rectangle) {
}
else {
    // unexpected case ğŸ˜¨
}
```

---

### With sealed class + switch (Java 17+)

```java
static double calculateArea(Shape shape) {

    return switch (shape) {
        case Circle c -> c.area();
        case Rectangle r -> r.area();
    };
}
```

âœ” No `default` needed
âœ” Compiler guarantees completeness

---

# 1ï¸âƒ£1ï¸âƒ£ Sealed Class vs Abstract Class

| Feature                    | Abstract | Sealed |
| -------------------------- | -------- | ------ |
| Can restrict subclasses    | âŒ        | âœ…      |
| Can have abstract methods  | âœ…        | âœ…      |
| Controls inheritance       | âŒ        | âœ…      |
| Better for domain modeling | âŒ        | âœ…      |

ğŸ‘‰ **They solve different problems**

---

# 1ï¸âƒ£2ï¸âƒ£ Sealed Class vs Final Class

| Feature         | Final          | Sealed                 |
| --------------- | -------------- | ---------------------- |
| Can be extended | âŒ              | âœ… (limited)            |
| Flexibility     | âŒ              | âœ…                      |
| Use case        | No inheritance | Controlled inheritance |

---

# 1ï¸âƒ£3ï¸âƒ£ Common Compilation Errors (INTERVIEW GOLD âš ï¸)

### âŒ Subclass not declared final/sealed/non-sealed

```java
class Circle extends Shape {}
```

ğŸ’¥ Error:

```text
class is not allowed to extend sealed class
```

---

### âŒ Extending sealed class without permit

```java
class Triangle extends Shape {}
```

ğŸ’¥ Error:

```text
class Triangle is not permitted
```

---

# 1ï¸âƒ£4ï¸âƒ£ Where Sealed Classes Are Used (Real Projects)

âœ” Domain modeling
âœ” State machines
âœ” Payment systems
âœ” Workflow engines
âœ” Event-driven systems
âœ” Compiler-like designs

---

# 1ï¸âƒ£5ï¸âƒ£ Tricky Interview Questions (WITH ANSWERS)

### Q1ï¸âƒ£ Can sealed class have constructors?

âœ… **Yes**, same as normal classes

---

### Q2ï¸âƒ£ Can sealed class be abstract?

âœ… **Yes** (mostly they are)

---

### Q3ï¸âƒ£ Can sealed class implement interface?

âœ… **Yes**

---

### Q4ï¸âƒ£ Can interface extend sealed interface?

âœ… **Yes**, but must follow sealing rules

---

### Q5ï¸âƒ£ Can sealed class extend another sealed class?

âœ… **Yes**

---

### Q6ï¸âƒ£ Can sealed class be final?

âŒ **No sense** â€“ final already blocks inheritance

---

### Q7ï¸âƒ£ Is `permits` mandatory?

âŒ Not always
âœ” If subclasses are in same file â†’ compiler infers

---

### Q8ï¸âƒ£ Why sealed classes improve switch?

âœ” Compiler knows **all possible types**

---

### Q9ï¸âƒ£ Are sealed classes related to security?

âœ” **Design-level safety**, not runtime security

---

### QğŸ”Ÿ Can we use sealed classes before Java 17?

âŒ Only preview in Java 15/16

---

# 1ï¸âƒ£6ï¸âƒ£ When NOT to use Sealed Classes

âŒ Framework-level base classes
âŒ Library meant for public extension
âŒ Highly dynamic inheritance models

---

# 1ï¸âƒ£7ï¸âƒ£ Final Summary (Interview Ready)

* Sealed class **restricts inheritance**
* Introduced in **Java 17**
* Uses `sealed`, `permits`
* Subclasses must be:

    * `final`
    * `sealed`
    * `non-sealed`
* Improves:

    * Safety
    * Readability
    * Pattern matching
    * Domain modeling

---

If you want next:
ğŸ‘‰ **Sealed vs Records vs Enums (deep comparison)**
ğŸ‘‰ **MCQs for interviews**
ğŸ‘‰ **Real Spring Boot use-case with sealed classes**

Just tell me ğŸ‘
